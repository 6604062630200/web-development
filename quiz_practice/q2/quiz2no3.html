<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="quiz3no3.css" />
    <title>Document</title>

    <script>
      window.onload = function () {
        let inp = document.getElementById("input-student")
        let stdList = document.getElementById("students-list")
        let btn = document.getElementById("btn")
        let radios = document.querySelectorAll('input[name="year"]')

        function addInstantly() {
          if (inp.checkValidity() && !inp.dataset.added) {
            let li = document.createElement("li")
            li.textContent = inp.value
            stdList.appendChild(li)

            inp.dataset.added = true
          } else if (!inp.checkValidity()) {
            inp.dataset.added = ""
          }
        }

        function addViaButton() {
          if (inp.checkValidity()) {
            let li = document.createElement("li")
            li.textContent = inp.value
            stdList.appendChild(li)
            inp.value = ""
          }
        }

        radios.forEach((radio) => {
          radio.addEventListener("change", () => {
            inp.value = radio.value + "-"
            inp.focus()
          })
        })

        function addViaBtn2() {
          if (inp.checkValidity()) {
            let li = document.createElement("li")
            li.textContent = inp.value
            stdList.appendChild(li)
            inp.value = ""
          }
        }

        // 3.2
        // inp.addEventListener("input", addInstantly)
        // btn.addEventListener("click", addViaButton)

        // 3.3
        btn.addEventListener("click", addViaBtn2)
      }
    </script>
  </head>
  <body>
    <form action="">
      <div>
        <label>
          <input type="radio" name="year" value="68" />
          ปี 1</label
        >
        <label> <input type="radio" name="year" value="67" />ปี 2 </label>
        <label> <input type="radio" name="year" value="66" />ปี 3 </label>
        <label> <input type="radio" name="year" value="65" />ปี 4 </label>
      </div>
      <input
        type="text"
        pattern="^6[5-8]-(040626|123456)-[0-9]{4}-[0-9]$"
        id="input-student"
        required />

      <button type="button" id="btn">ส่ง</button>
    </form>
    <ol id="students-list"></ol>
  </body>
</html>
